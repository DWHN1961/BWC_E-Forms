<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Consent to Act as Director | Bethel Worldwide Corporation</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Crimson+Pro:wght@400;600&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            min-height: 100vh;
            background: linear-gradient(135deg, #1e3a5f 0%, #2d5986 100%);
            padding: 40px 20px;
            font-family: 'Crimson Pro', Georgia, serif;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2d5986 0%, #1e3a5f 100%);
            padding: 40px;
            color: white;
            text-align: center;
            border-bottom: 4px solid #d4af37;
        }

        .header h1 {
            margin: 0 0 10px 0;
            font-size: 28px;
            font-weight: 600;
            letter-spacing: 1px;
            text-transform: uppercase;
            font-family: 'Playfair Display', Georgia, serif;
        }

        .header h2 {
            margin: 10px 0 0 0;
            font-size: 20px;
            font-weight: 500;
            opacity: 0.95;
        }

        .form-content {
            padding: 40px;
        }

        .section {
            margin-bottom: 35px;
        }

        .section-title {
            font-size: 20px;
            color: #1e3a5f;
            margin-bottom: 20px;
            border-bottom: 2px solid #d4af37;
            padding-bottom: 8px;
            font-family: 'Playfair Display', Georgia, serif;
            text-transform: uppercase;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 6px;
            font-weight: 600;
            color: #333;
            font-size: 15px;
        }

        .required {
            color: #dc2626;
        }

        input[type="text"],
        input[type="date"],
        textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #d1d5db;
            border-radius: 6px;
            font-size: 16px;
            font-family: inherit;
            transition: border-color 0.2s;
        }

        input:focus,
        textarea:focus {
            outline: none;
            border-color: #2d5986;
        }

        input.error,
        textarea.error {
            border-color: #dc2626;
        }

        textarea {
            resize: vertical;
            min-height: 80px;
        }

        .error-message {
            color: #dc2626;
            font-size: 14px;
            margin-top: 4px;
            display: block;
        }

        input[type="checkbox"],
        input[type="radio"] {
            margin-right: 8px;
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .radio-group {
            display: flex;
            gap: 20px;
            margin-top: 10px;
        }

        .radio-label {
            display: flex;
            align-items: center;
            cursor: pointer;
            font-weight: normal;
        }

        .array-item {
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 15px;
            background-color: #f9fafb;
            position: relative;
        }

        .array-item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #d1d5db;
        }

        .array-item-title {
            font-size: 16px;
            font-weight: 600;
            color: #2d5986;
        }

        .btn-danger {
            background-color: #ef4444;
            color: white;
            padding: 8px 16px;
            font-size: 14px;
        }

        .btn-danger:hover {
            background-color: #dc2626;
        }

        .info-box {
            background-color: #dbeafe;
            padding: 15px;
            border-radius: 6px;
            border: 1px solid #60a5fa;
            font-size: 14px;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .note-box {
            background-color: #fef3c7;
            padding: 15px;
            border-radius: 6px;
            border: 1px solid #fbbf24;
            font-size: 14px;
            margin-bottom: 20px;
        }

        /* Signature styles */
        .signature-container {
            border: 2px solid #d1d5db;
            border-radius: 6px;
            padding: 20px;
            background-color: #f9fafb;
            margin-top: 10px;
        }

        .signature-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid #e5e7eb;
        }

        .signature-tab {
            padding: 10px 20px;
            cursor: pointer;
            border: none;
            background: none;
            font-size: 15px;
            font-weight: 600;
            color: #6b7280;
            border-bottom: 3px solid transparent;
            transition: all 0.2s;
        }

        .signature-tab.active {
            color: #2d5986;
            border-bottom-color: #2d5986;
        }

        .signature-panel {
            display: none;
        }

        .signature-panel.active {
            display: block;
        }

        #signatureCanvas {
            border: 2px dashed #d1d5db;
            border-radius: 4px;
            cursor: crosshair;
            background: white;
            display: block;
            width: 100%;
            max-width: 500px;
            touch-action: none;
        }

        .canvas-controls {
            margin-top: 15px;
            display: flex;
            gap: 10px;
        }

        .signature-preview {
            margin-top: 15px;
            padding: 15px;
            background: white;
            border: 2px solid #d1d5db;
            border-radius: 6px;
            display: none;
        }

        .signature-preview.active {
            display: block;
        }

        .signature-preview img {
            max-width: 100%;
            height: auto;
        }

        .signature-preview-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        input[type="file"] {
            display: none;
        }

        .file-upload-label {
            display: inline-block;
            padding: 10px 20px;
            background-color: #2d5986;
            color: white;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: background-color 0.3s;
        }

        .file-upload-label:hover {
            background-color: #1e3a5f;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 15px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background-color: #2d5986;
            color: white;
        }

        .btn-primary:hover {
            background-color: #1e3a5f;
        }

        .btn-secondary {
            background-color: #6b7280;
            color: white;
        }

        .btn-secondary:hover {
            background-color: #4b5563;
        }

        .agreement-box {
            background-color: #f0fdf4;
            border: 2px solid #22c55e;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
        }

        .agreement-checkbox {
            display: flex;
            align-items: start;
            gap: 10px;
            margin-top: 10px;
        }

        .agreement-checkbox input[type="checkbox"] {
            margin-top: 3px;
            flex-shrink: 0;
        }

        .agreement-checkbox label {
            font-weight: normal;
            margin-bottom: 0;
        }

        .btn-submit {
            padding: 16px 48px;
            background-color: #2d5986;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }

        .btn-submit:hover {
            background-color: #1e3a5f;
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }

        .submit-section {
            text-align: center;
            margin-top: 40px;
            padding-top: 30px;
            border-top: 3px solid #d4af37;
        }

        .submit-note {
            margin-top: 15px;
            font-size: 14px;
            color: #666;
        }

        .footer {
            background-color: #f3f4f6;
            padding: 20px;
            text-align: center;
            font-size: 13px;
            color: #666;
            border-top: 1px solid #e5e7eb;
        }

        .footer p {
            margin: 5px 0;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 22px;
            }

            .form-content {
                padding: 20px;
            }

            #signatureCanvas {
                height: 150px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>Bethel Worldwide Corporation</h1>
            <h2>Consent to Act as a Director</h2>
        </div>

        <!-- Form Content -->
        <div class="form-content">
            <form id="consentForm">
                
                <!-- Date and Company -->
                <div class="section">
                    <h3 class="section-title">Document Information</h3>
                    
                    <div class="form-group">
                        <label>Date <span class="required">*</span></label>
                        <input type="date" id="consentDate" required>
                        <span class="error-message" id="error-consentDate"></span>
                    </div>

                    <div class="form-group">
                        <label>Company Name <span class="required">*</span></label>
                        <input type="text" id="companyName" required>
                        <span class="error-message" id="error-companyName"></span>
                    </div>
                </div>

                <!-- Director Information -->
                <div class="section">
                    <h3 class="section-title">Director Information</h3>
                    
                    <div class="form-group">
                        <label>Number of Directors <span class="required">*</span></label>
                        <div class="radio-group">
                            <label class="radio-label">
                                <input type="radio" name="directorCount" value="single" onchange="toggleDirectorFields()">
                                <span>Single Director (I)</span>
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="directorCount" value="multiple" onchange="toggleDirectorFields()">
                                <span>Multiple Directors (We)</span>
                            </label>
                        </div>
                        <span class="error-message" id="error-directorCount"></span>
                    </div>

                    <!-- Single Director Fields -->
                    <div id="singleDirectorFields" style="display: none;">
                        <div class="form-group">
                            <label>Director Name <span class="required">*</span></label>
                            <input type="text" id="directorName" placeholder="Enter full name">
                            <span class="error-message" id="error-directorName"></span>
                        </div>

                        <div class="section-title" style="font-size: 16px; margin-top: 20px;">Residential Address</div>
                        <div class="form-group">
                            <label>Address <span class="required">*</span></label>
                            <input type="text" id="directorAddress" placeholder="Address line 1">
                            <span class="error-message" id="error-directorAddress"></span>
                        </div>
                        <div class="form-group">
                            <label>Street</label>
                            <input type="text" id="directorStreet" placeholder="Street">
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div class="form-group">
                                <label>City <span class="required">*</span></label>
                                <input type="text" id="directorCity" placeholder="City">
                                <span class="error-message" id="error-directorCity"></span>
                            </div>
                            <div class="form-group">
                                <label>State/Province</label>
                                <input type="text" id="directorState" placeholder="State/Province">
                            </div>
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div class="form-group">
                                <label>Postal Code</label>
                                <input type="text" id="directorPostal" placeholder="Postal Code">
                            </div>
                            <div class="form-group">
                                <label>Country <span class="required">*</span></label>
                                <select id="directorCountry" style="width: 100%; padding: 12px; border: 2px solid #d1d5db; border-radius: 6px; font-size: 16px; font-family: inherit;">
                                    <option value="">Select Country</option>
                                </select>
                                <span class="error-message" id="error-directorCountry"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Email</label>
                            <input type="text" id="directorEmail" placeholder="Email address">
                        </div>
                        <div class="form-group">
                            <label>Phone</label>
                            <div style="display: grid; grid-template-columns: 120px 1fr; gap: 10px;">
                                <select id="directorDialCode" style="padding: 12px; border: 2px solid #d1d5db; border-radius: 6px; font-size: 16px; font-family: inherit;">
                                    <option value="">Code</option>
                                    <option value="+1">+1 (USA/Canada)</option>
                                    <option value="+44">+44 (UK)</option>
                                    <option value="+971">+971 (UAE)</option>
                                    <option value="+91">+91 (India)</option>
                                    <option value="+86">+86 (China)</option>
                                    <option value="+61">+61 (Australia)</option>
                                    <option value="+33">+33 (France)</option>
                                    <option value="+49">+49 (Germany)</option>
                                    <option value="+81">+81 (Japan)</option>
                                    <option value="+65">+65 (Singapore)</option>
                                </select>
                                <input type="text" id="directorPhone" placeholder="Phone Number">
                            </div>
                        </div>
                    </div>

                    <!-- Multiple Directors Fields -->
                    <div id="multipleDirectorsFields" style="display: none;">
                        <div id="directorsContainer"></div>
                        <button type="button" class="btn btn-primary" onclick="addDirector()" style="margin-top: 10px;">+ Add Director</button>
                    </div>
                </div>

                <!-- Legal Certifications -->
                <div class="section">
                    <h3 class="section-title">Legal Certifications</h3>
                    
                    <div class="note-box">
                        <strong>üìã BVI Business Companies Act, 2004:</strong>
                        <p style="margin-top: 10px;"><strong>Section 112:</strong> Consent to act as Director</p>
                        <p style="margin-top: 5px;"><strong>Section 111:</strong> Disqualification of Directors</p>
                        <p style="margin-top: 5px;"><strong>Sections 118A & 118B:</strong> Filing requirements with Registrar of Corporate Affairs</p>
                    </div>

                    <div class="info-box">
                        <strong>Declaration:</strong>
                        <p style="margin-top: 10px;">By signing this consent, you certify that:</p>
                        <ul style="margin-left: 20px; margin-top: 5px;">
                            <li>You consent to act as a Director of the company pursuant to Section 112 of the BVI Business Companies Act, 2004</li>
                            <li>You have not been disqualified to act as a Director under Section 111 of the BVI Business Companies Act, 2004</li>
                            <li>You request the registered agent to file your particulars with the Registrar of Corporate Affairs pursuant to sections 118A and 118B</li>
                        </ul>
                    </div>
                </div>

                <!-- Digital Signature -->
                <div class="section" id="singleDirectorSignatureSection">
                    <h3 class="section-title">Director Signature</h3>
                    
                    <div class="form-group">
                        <label>Digital Signature <span class="required">*</span></label>
                        <div class="info-box">
                            <strong>üìù About Digital Signatures:</strong> Your digital signature has the same legal validity as a handwritten signature. 
                            You can either draw your signature using your mouse/touchscreen or upload an image of your signature.
                            <br><br>
                            <em>Note: If multiple directors are selected, each director will sign individually in their respective sections above.</em>
                        </div>
                        
                        <div class="signature-container">
                            <div class="signature-tabs">
                                <button type="button" class="signature-tab active" onclick="switchSignatureTab('draw')">
                                    ‚úçÔ∏è Draw Signature
                                </button>
                                <button type="button" class="signature-tab" onclick="switchSignatureTab('upload')">
                                    üì§ Upload Image
                                </button>
                            </div>

                            <div id="drawPanel" class="signature-panel active">
                                <p style="margin-bottom: 10px; color: #666; font-size: 14px;">Draw your signature in the box below:</p>
                                <canvas id="signatureCanvas" width="500" height="200"></canvas>
                                <div class="canvas-controls">
                                    <button type="button" class="btn btn-secondary" onclick="clearSignature()">Clear</button>
                                    <button type="button" class="btn btn-primary" onclick="saveDrawnSignature()">Save Signature</button>
                                </div>
                            </div>

                            <div id="uploadPanel" class="signature-panel">
                                <p style="margin-bottom: 10px; color: #666; font-size: 14px;">Upload an image of your signature (PNG, JPG, or JPEG):</p>
                                <input type="file" id="signatureUpload" accept="image/png,image/jpeg,image/jpg">
                                <label for="signatureUpload" class="file-upload-label">üìÅ Choose File</label>
                                <p style="margin-top: 10px; font-size: 13px; color: #666;">For best results, use a clear image with a white background.</p>
                            </div>

                            <div id="signaturePreview" class="signature-preview">
                                <div class="signature-preview-header">
                                    <span style="color: #059669; font-weight: 600;">‚úì Signature Captured</span>
                                    <button type="button" class="btn btn-secondary" onclick="clearSavedSignature()" style="padding: 6px 12px; font-size: 14px;">Change</button>
                                </div>
                                <img id="signatureImage" src="" alt="Your Signature">
                            </div>
                        </div>
                        <span class="error-message" id="error-signature"></span>
                    </div>

                    <div class="agreement-box">
                        <strong>Electronic Signature Agreement</strong>
                        <div class="agreement-checkbox">
                            <input type="checkbox" id="signatureAgreement" required>
                            <label for="signatureAgreement">
                                I agree that my digital signature above is the legal equivalent of my manual/handwritten signature and I consent to be legally bound by this electronic signature. I certify that the certifications made in this document are true and accurate. <span class="required">*</span>
                            </label>
                        </div>
                        <span class="error-message" id="error-agreement"></span>
                    </div>
                </div>

                <!-- Submit Button -->
                <div class="submit-section">
                    <button type="submit" class="btn-submit">Download Consent Letter (PDF)</button>
                    <p class="submit-note">* Indicates required field</p>
                    <p class="submit-note">After downloading, please email the completed consent to Bethel Worldwide Corporation</p>
                </div>
            </form>
        </div>

        <!-- Footer -->
        <div class="footer">
            <p>&copy; <span id="currentYear"></span> Bethel Worldwide Corporation. All rights reserved.</p>
            <p>Bethel House, P.O. Box 4749, Road Town, Tortola, British Virgin Islands</p>
            <p>Phone: (284) 494-0778 | Fax: (284) 494-0781 | Email: <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="046d6a626b446661706c6168736b766860736d606166726d2a676b69">[email&#160;protected]</a></p>
        </div>
    </div>

    <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
        // Set current year
        document.getElementById('currentYear').textContent = new Date().getFullYear();

        // Signature variables
        let signatureDataURL = null;

        // Directors array for multiple directors
        let directors = [];

        // Toggle director fields based on selection
        function toggleDirectorFields() {
            const isSingle = document.querySelector('input[name="directorCount"][value="single"]').checked;
            const isMultiple = document.querySelector('input[name="directorCount"][value="multiple"]').checked;
            
            document.getElementById('singleDirectorFields').style.display = isSingle ? 'block' : 'none';
            document.getElementById('multipleDirectorsFields').style.display = isMultiple ? 'block' : 'none';
            document.getElementById('singleDirectorSignatureSection').style.display = isSingle ? 'block' : 'none';
            
            // Initialize first director for multiple directors
            if (isMultiple && directors.length === 0) {
                addDirector();
            }
        }

        // Add director function
        function addDirector() {
            const index = directors.length;
            directors.push({});
            const container = document.getElementById('directorsContainer');
            const div = document.createElement('div');
            div.className = 'array-item';
            div.innerHTML = `
                <div class="array-item-header">
                    <div class="array-item-title">Director ${index + 1}</div>
                    ${index > 0 ? `<button type="button" class="btn btn-danger" onclick="removeDirector(${index})">Remove</button>` : ''}
                </div>
                <div class="form-group">
                    <label>Director Name</label>
                    <input type="text" data-director="${index}" data-field="name" placeholder="Enter full name">
                </div>
                <div class="section-title" style="font-size: 14px; margin-top: 15px; margin-bottom: 10px;">Residential Address</div>
                <div class="form-group">
                    <label>Address</label>
                    <input type="text" data-director="${index}" data-field="address" placeholder="Address line 1">
                </div>
                <div class="form-group">
                    <label>Street</label>
                    <input type="text" data-director="${index}" data-field="street" placeholder="Street">
                </div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                    <div class="form-group">
                        <label>City</label>
                        <input type="text" data-director="${index}" data-field="city" placeholder="City">
                    </div>
                    <div class="form-group">
                        <label>State/Province</label>
                        <input type="text" data-director="${index}" data-field="state" placeholder="State/Province">
                    </div>
                </div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                    <div class="form-group">
                        <label>Postal Code</label>
                        <input type="text" data-director="${index}" data-field="postal" placeholder="Postal Code">
                    </div>
                    <div class="form-group">
                        <label>Country</label>
                        <select data-director="${index}" data-field="country" style="width: 100%; padding: 12px; border: 2px solid #d1d5db; border-radius: 6px; font-size: 16px; font-family: inherit;">
                            <option value="">Select Country</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="text" data-director="${index}" data-field="email" placeholder="Email address">
                </div>
                <div class="form-group">
                    <label>Phone</label>
                    <div style="display: grid; grid-template-columns: 120px 1fr; gap: 10px;">
                        <select data-director="${index}" data-field="dialCode" style="padding: 12px; border: 2px solid #d1d5db; border-radius: 6px; font-size: 16px; font-family: inherit;">
                            <option value="">Code</option>
                            <option value="+1">+1 (USA/Canada)</option>
                            <option value="+44">+44 (UK)</option>
                            <option value="+971">+971 (UAE)</option>
                            <option value="+91">+91 (India)</option>
                            <option value="+86">+86 (China)</option>
                            <option value="+61">+61 (Australia)</option>
                            <option value="+33">+33 (France)</option>
                            <option value="+49">+49 (Germany)</option>
                            <option value="+81">+81 (Japan)</option>
                            <option value="+65">+65 (Singapore)</option>
                        </select>
                        <input type="text" data-director="${index}" data-field="phone" placeholder="Phone Number">
                    </div>
                </div>
                <div class="section-title" style="font-size: 14px; margin-top: 20px; margin-bottom: 10px;">Signature for Director ${index + 1}</div>
                <div class="signature-container">
                    <div class="signature-tabs">
                        <button type="button" class="signature-tab active" onclick="switchTab${index}('draw')">Draw Signature</button>
                        <button type="button" class="signature-tab" onclick="switchTab${index}('upload')">Upload Signature</button>
                    </div>
                    <div class="signature-panel active" id="drawPanel${index}">
                        <canvas id="signatureCanvas${index}" width="500" height="150"></canvas>
                        <button type="button" class="btn btn-secondary" onclick="clearSignature${index}()">Clear Signature</button>
                    </div>
                    <div class="signature-panel" id="uploadPanel${index}">
                        <input type="file" id="signatureUpload${index}" accept="image/*" style="display: none;" onchange="handleSignatureUpload${index}(event)">
                        <button type="button" class="btn btn-secondary" onclick="document.getElementById('signatureUpload${index}').click()">Choose File</button>
                        <div id="uploadPreview${index}" style="margin-top: 10px;"></div>
                    </div>
                </div>
            `;
            container.appendChild(div);
            
            // Populate country dropdown
            const countrySelect = div.querySelector(`select[data-director="${index}"][data-field="country"]`);
            populateCountryDropdown(countrySelect);
            
            // Initialize signature canvas
            initializeDirectorCanvas(index);
        }

        // Remove director function
        function removeDirector(index) {
            const container = document.getElementById('directorsContainer');
            container.children[index].remove();
            directors[index] = null;
            directorSignatures[index] = null;
        }

        // Country dropdown population
        function populateCountryDropdown(selectElement) {
            const countries = ["Afghanistan","Albania","Algeria","Andorra","Angola","Antigua and Barbuda","Argentina","Armenia","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bhutan","Bolivia","Bosnia and Herzegovina","Botswana","Brazil","Brunei","Bulgaria","Burkina Faso","Burundi","Cabo Verde","Cambodia","Cameroon","Canada","Central African Republic","Chad","Chile","China","Colombia","Comoros","Congo","Costa Rica","Croatia","Cuba","Cyprus","Czech Republic","Denmark","Djibouti","Dominica","Dominican Republic","East Timor","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Eswatini","Ethiopia","Fiji","Finland","France","Gabon","Gambia","Georgia","Germany","Ghana","Greece","Grenada","Guatemala","Guinea","Guinea-Bissau","Guyana","Haiti","Honduras","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Israel","Italy","Ivory Coast","Jamaica","Japan","Jordan","Kazakhstan","Kenya","Kiribati","Kosovo","Kuwait","Kyrgyzstan","Laos","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Mauritania","Mauritius","Mexico","Micronesia","Moldova","Monaco","Mongolia","Montenegro","Morocco","Mozambique","Myanmar","Namibia","Nauru","Nepal","Netherlands","New Zealand","Nicaragua","Niger","Nigeria","North Korea","North Macedonia","Norway","Oman","Pakistan","Palau","Palestine","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Poland","Portugal","Qatar","Romania","Russia","Rwanda","Saint Kitts and Nevis","Saint Lucia","Saint Vincent and the Grenadines","Samoa","San Marino","Sao Tome and Principe","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","South Korea","South Sudan","Spain","Sri Lanka","Sudan","Suriname","Sweden","Switzerland","Syria","Taiwan","Tajikistan","Tanzania","Thailand","Togo","Tonga","Trinidad and Tobago","Tunisia","Turkey","Turkmenistan","Tuvalu","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States","Uruguay","Uzbekistan","Vanuatu","Vatican City","Venezuela","Vietnam","Yemen","Zambia","Zimbabwe"];
            countries.forEach(country => {
                const option = document.createElement('option');
                option.value = country;
                option.textContent = country;
                selectElement.appendChild(option);
            });
        }

        // Initialize director signature canvases
        const directorSignatures = [];
        
        function initializeDirectorCanvas(index) {
            const canvas = document.getElementById(`signatureCanvas${index}`);
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            let isDrawing = false;
            let lastX = 0;
            let lastY = 0;
            
            ctx.strokeStyle = '#000';
            ctx.lineWidth = 2;
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';
            
            function startDrawing(e) {
                isDrawing = true;
                const rect = canvas.getBoundingClientRect();
                lastX = e.clientX - rect.left;
                lastY = e.clientY - rect.top;
            }
            
            function draw(e) {
                if (!isDrawing) return;
                e.preventDefault();
                const rect = canvas.getBoundingClientRect();
                const currentX = e.clientX - rect.left;
                const currentY = e.clientY - rect.top;
                ctx.beginPath();
                ctx.moveTo(lastX, lastY);
                ctx.lineTo(currentX, currentY);
                ctx.stroke();
                lastX = currentX;
                lastY = currentY;
            }
            
            function stopDrawing() {
                if (isDrawing) {
                    isDrawing = false;
                    directorSignatures[index] = canvas.toDataURL();
                }
            }
            
            canvas.addEventListener('mousedown', startDrawing);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', stopDrawing);
            canvas.addEventListener('mouseout', stopDrawing);
            
            // Create dynamic functions for this director
            window[`clearSignature${index}`] = function() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                directorSignatures[index] = null;
            };
            
            window[`switchTab${index}`] = function(tab) {
                const tabs = document.querySelectorAll(`#drawPanel${index}, #uploadPanel${index}`).length > 0 ? 
                    [document.querySelector(`button[onclick="switchTab${index}('draw')"]`), document.querySelector(`button[onclick="switchTab${index}('upload')"]`)] : [];
                const panels = [document.getElementById(`drawPanel${index}`), document.getElementById(`uploadPanel${index}`)];
                tabs.forEach(t => t && t.classList.remove('active'));
                panels.forEach(p => p && p.classList.remove('active'));
                if (tab === 'draw') {
                    tabs[0] && tabs[0].classList.add('active');
                    panels[0] && panels[0].classList.add('active');
                } else {
                    tabs[1] && tabs[1].classList.add('active');
                    panels[1] && panels[1].classList.add('active');
                }
            };
            
            window[`handleSignatureUpload${index}`] = function(event) {
                const file = event.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        const img = new Image();
                        img.onload = function() {
                            ctx.clearRect(0, 0, canvas.width, canvas.height);
                            const scale = Math.min(canvas.width / img.width, canvas.height / img.height);
                            const x = (canvas.width - img.width * scale) / 2;
                            const y = (canvas.height - img.height * scale) / 2;
                            ctx.drawImage(img, x, y, img.width * scale, img.height * scale);
                            directorSignatures[index] = canvas.toDataURL();
                            document.getElementById(`uploadPreview${index}`).innerHTML = '<p style="color: #059669;">‚úì Signature uploaded successfully</p>';
                        };
                        img.src = e.target.result;
                    };
                    reader.readAsDataURL(file);
                }
            };
        }

        // Canvas setup
        const canvas = document.getElementById('signatureCanvas');
        const ctx = canvas.getContext('2d');
        let isDrawing = false;
        let lastX = 0;
        let lastY = 0;

        ctx.strokeStyle = '#000';
        ctx.lineWidth = 2;
        ctx.lineCap = 'round';
        ctx.lineJoin = 'round';

        // Drawing functions
        function startDrawing(e) {
            isDrawing = true;
            const rect = canvas.getBoundingClientRect();
            const scaleX = canvas.width / rect.width;
            const scaleY = canvas.height / rect.height;
            
            if (e.type === 'mousedown') {
                lastX = (e.clientX - rect.left) * scaleX;
                lastY = (e.clientY - rect.top) * scaleY;
            } else if (e.type === 'touchstart') {
                e.preventDefault();
                lastX = (e.touches[0].clientX - rect.left) * scaleX;
                lastY = (e.touches[0].clientY - rect.top) * scaleY;
            }
        }

        function draw(e) {
            if (!isDrawing) return;
            const rect = canvas.getBoundingClientRect();
            const scaleX = canvas.width / rect.width;
            const scaleY = canvas.height / rect.height;
            let currentX, currentY;
            
            if (e.type === 'mousemove') {
                currentX = (e.clientX - rect.left) * scaleX;
                currentY = (e.clientY - rect.top) * scaleY;
            } else if (e.type === 'touchmove') {
                e.preventDefault();
                currentX = (e.touches[0].clientX - rect.left) * scaleX;
                currentY = (e.touches[0].clientY - rect.top) * scaleY;
            }

            ctx.beginPath();
            ctx.moveTo(lastX, lastY);
            ctx.lineTo(currentX, currentY);
            ctx.stroke();
            lastX = currentX;
            lastY = currentY;
        }

        function stopDrawing() {
            isDrawing = false;
        }

        canvas.addEventListener('mousedown', startDrawing);
        canvas.addEventListener('mousemove', draw);
        canvas.addEventListener('mouseup', stopDrawing);
        canvas.addEventListener('mouseout', stopDrawing);
        canvas.addEventListener('touchstart', startDrawing);
        canvas.addEventListener('touchmove', draw);
        canvas.addEventListener('touchend', stopDrawing);

        function clearSignature() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }

        function saveDrawnSignature() {
            const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            const data = imageData.data;
            let isEmpty = true;
            for (let i = 0; i < data.length; i += 4) {
                if (data[i + 3] !== 0) {
                    isEmpty = false;
                    break;
                }
            }
            if (isEmpty) {
                alert('Please draw your signature before saving.');
                return;
            }
            signatureDataURL = canvas.toDataURL();
            document.getElementById('signatureImage').src = signatureDataURL;
            document.getElementById('signaturePreview').classList.add('active');
        }

        function clearSavedSignature() {
            signatureDataURL = null;
            document.getElementById('signaturePreview').classList.remove('active');
            clearSignature();
        }

        document.getElementById('signatureUpload').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (!file) return;
            if (!file.type.match('image/(png|jpeg|jpg)')) {
                alert('Please upload a PNG or JPEG image.');
                return;
            }
            const reader = new FileReader();
            reader.onload = function(event) {
                signatureDataURL = event.target.result;
                document.getElementById('signatureImage').src = signatureDataURL;
                document.getElementById('signaturePreview').classList.add('active');
            };
            reader.readAsDataURL(file);
        });

        function switchSignatureTab(tab) {
            const tabs = document.querySelectorAll('.signature-tab');
            const panels = document.querySelectorAll('.signature-panel');
            tabs.forEach(t => t.classList.remove('active'));
            panels.forEach(p => p.classList.remove('active'));
            if (tab === 'draw') {
                tabs[0].classList.add('active');
                document.getElementById('drawPanel').classList.add('active');
            } else {
                tabs[1].classList.add('active');
                document.getElementById('uploadPanel').classList.add('active');
            }
        }

        // Form submission
        document.getElementById('consentForm').addEventListener('submit', function(e) {
            e.preventDefault();

            // Clear previous errors
            document.querySelectorAll('.error-message').forEach(el => el.textContent = '');
            document.querySelectorAll('.error').forEach(el => el.classList.remove('error'));

            let isValid = true;

            // Validate director count selection
            const directorCount = document.querySelector('input[name="directorCount"]:checked');
            if (!directorCount) {
                isValid = false;
                document.getElementById('error-directorCount').textContent = 'Please select number of directors';
            }

            // Validate required fields
            const requiredFields = ['consentDate', 'companyName'];

            requiredFields.forEach(field => {
                const el = document.getElementById(field);
                if (!el || !el.value.trim()) {
                    isValid = false;
                    const errorEl = document.getElementById(`error-${field}`);
                    if (errorEl) errorEl.textContent = 'This field is required';
                    if (el) el.classList.add('error');
                }
            });

            // Validate director-specific fields based on selection
            if (directorCount) {
                if (directorCount.value === 'single') {
                    // Validate single director fields
                    const nameEl = document.getElementById('directorName');
                    const addressEl = document.getElementById('directorAddress');
                    const cityEl = document.getElementById('directorCity');
                    const countryEl = document.getElementById('directorCountry');
                    
                    if (!nameEl.value.trim()) {
                        isValid = false;
                        document.getElementById('error-directorName').textContent = 'Director name is required';
                        nameEl.classList.add('error');
                    }
                    
                    if (!addressEl.value.trim()) {
                        isValid = false;
                        document.getElementById('error-directorAddress').textContent = 'Address is required';
                        addressEl.classList.add('error');
                    }
                    
                    if (!cityEl.value.trim()) {
                        isValid = false;
                        document.getElementById('error-directorCity').textContent = 'City is required';
                        cityEl.classList.add('error');
                    }
                    
                    if (!countryEl.value.trim()) {
                        isValid = false;
                        document.getElementById('error-directorCountry').textContent = 'Country is required';
                        countryEl.classList.add('error');
                    }
                    
                    // Validate single director signature
                    if (!signatureDataURL) {
                        isValid = false;
                        document.getElementById('error-signature').textContent = 'Please provide your digital signature';
                    }
                    
                } else if (directorCount.value === 'multiple') {
                    // Validate multiple directors - each must have name, address, and signature
                    let hasCompleteDirector = false;
                    let missingSignatures = [];
                    
                    directors.forEach((dir, idx) => {
                        if (dir !== null) {
                            const nameInput = document.querySelector(`input[data-director="${idx}"][data-field="name"]`);
                            const addressInput = document.querySelector(`input[data-director="${idx}"][data-field="address"]`);
                            
                            if (nameInput && addressInput && nameInput.value.trim() && addressInput.value.trim()) {
                                hasCompleteDirector = true;
                                
                                // Check if this director has a signature
                                if (!directorSignatures[idx]) {
                                    missingSignatures.push(idx + 1);
                                }
                            }
                        }
                    });
                    
                    if (!hasCompleteDirector) {
                        isValid = false;
                        alert('Please complete at least one director\'s information (name and address)');
                    }
                    
                    if (missingSignatures.length > 0) {
                        isValid = false;
                        alert(`Please provide signatures for Director(s): ${missingSignatures.join(', ')}`);
                    }
                }
            }

            // Validate signature agreement (only for single director)
            if (directorCount && directorCount.value === 'single') {
                if (!document.getElementById('signatureAgreement').checked) {
                    isValid = false;
                    document.getElementById('error-agreement').textContent = 'You must agree to the electronic signature terms';
                }
            }

            if (!isValid) {
                alert('Please fill in all required fields marked with * and provide your digital signature');
                window.scrollTo({ top: 0, behavior: 'smooth' });
                return;
            }

            // Generate PDF
            generatePDF();
        });

        function generatePDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            const pageWidth = doc.internal.pageSize.width;
            const pageHeight = doc.internal.pageSize.height;
            const margin = 20;
            const lineHeight = 6;
            let yPosition = margin;

            function addText(text, x, y, maxWidth) {
                const lines = doc.splitTextToSize(text, maxWidth);
                lines.forEach((line, index) => {
                    if (y + (index * lineHeight) > pageHeight - margin) {
                        doc.addPage();
                        y = margin;
                    }
                    doc.text(line, x, y + (index * lineHeight));
                });
                return y + (lines.length * lineHeight);
            }

            // Title
            doc.setFontSize(14);
            doc.setFont(undefined, 'bold');
            yPosition = addText('CONSENT TO ACT AS A DIRECTOR', margin, yPosition, pageWidth - 2 * margin);
            yPosition += 10;

            // Date
            doc.setFontSize(10);
            doc.setFont(undefined, 'normal');
            const dateStr = new Date(document.getElementById('consentDate').value).toLocaleDateString('en-US', { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
            yPosition = addText(`Date: ${dateStr}`, margin, yPosition, pageWidth - 2 * margin);
            yPosition += 10;

            // To Bethel
            yPosition = addText('Bethel Worldwide Corporation', margin, yPosition, pageWidth - 2 * margin);
            yPosition = addText('Bethel House', margin, yPosition, pageWidth - 2 * margin);
            yPosition = addText('P.O. Box 4749', margin, yPosition, pageWidth - 2 * margin);
            yPosition = addText('Road Town, Tortola', margin, yPosition, pageWidth - 2 * margin);
            yPosition = addText('British Virgin Islands', margin, yPosition, pageWidth - 2 * margin);
            yPosition += 8;

            yPosition = addText('Dear Sirs,', margin, yPosition, pageWidth - 2 * margin);
            yPosition += 8;

            // RE: Company name
            doc.setFont(undefined, 'bold');
            yPosition = addText(`RE: ${document.getElementById('companyName').value}`, margin, yPosition, pageWidth - 2 * margin);
            yPosition += 8;

            // Main content
            doc.setFont(undefined, 'normal');
            const directorCount = document.querySelector('input[name="directorCount"]:checked').value;
            const pronoun = directorCount === 'single' ? 'I' : 'We';
            const verb = directorCount === 'single' ? 'do' : 'do';
            
            let directorInfo = '';
            let directorNames = '';
            let directorData = [];
            
            function buildAddress(prefix, index = null) {
                let addressParts = [];
                let address, street, city, state, postal, country;
                
                if (index === null) {
                    // Single director
                    address = document.getElementById(`${prefix}Address`)?.value || '';
                    street = document.getElementById(`${prefix}Street`)?.value || '';
                    city = document.getElementById(`${prefix}City`)?.value || '';
                    state = document.getElementById(`${prefix}State`)?.value || '';
                    postal = document.getElementById(`${prefix}Postal`)?.value || '';
                    country = document.getElementById(`${prefix}Country`)?.value || '';
                } else {
                    // Multiple directors
                    address = document.querySelector(`[data-director="${index}"][data-field="address"]`)?.value || '';
                    street = document.querySelector(`[data-director="${index}"][data-field="street"]`)?.value || '';
                    city = document.querySelector(`[data-director="${index}"][data-field="city"]`)?.value || '';
                    state = document.querySelector(`[data-director="${index}"][data-field="state"]`)?.value || '';
                    postal = document.querySelector(`[data-director="${index}"][data-field="postal"]`)?.value || '';
                    country = document.querySelector(`[data-director="${index}"][data-field="country"]`)?.value || '';
                }
                
                if (address) addressParts.push(address);
                if (street) addressParts.push(street);
                if (city) addressParts.push(city);
                if (state) addressParts.push(state);
                if (postal) addressParts.push(postal);
                if (country) addressParts.push(country);
                
                return addressParts.join(', ');
            }
            
            if (directorCount === 'single') {
                const directorName = document.getElementById('directorName').value;
                const fullAddress = buildAddress('director');
                directorInfo = `${directorName} of ${fullAddress}`;
                directorNames = directorName;
                directorData.push({
                    name: directorName,
                    signature: signatureDataURL
                });
            } else {
                // Multiple directors
                let directorsList = [];
                directors.forEach((dir, idx) => {
                    if (dir !== null) {
                        const nameInput = document.querySelector(`input[data-director="${idx}"][data-field="name"]`);
                        const addressInput = document.querySelector(`input[data-director="${idx}"][data-field="address"]`);
                        if (nameInput && addressInput && nameInput.value.trim() && addressInput.value.trim()) {
                            const fullAddress = buildAddress('', idx);
                            directorsList.push(`${nameInput.value.trim()} of ${fullAddress}`);
                            directorNames += (directorNames ? ', ' : '') + nameInput.value.trim();
                            directorData.push({
                                name: nameInput.value.trim(),
                                signature: directorSignatures[idx]
                            });
                        }
                    }
                });
                directorInfo = directorsList.join('; ');
            }

            const consentText = `${pronoun} ${directorInfo} ${verb} hereby consent to act as a Director/s of the above mentioned company pursuant to Section 112 of the BVI Business Companies Act, 2004. ${pronoun} hereby certify that ${pronoun.toLowerCase()}/we have not been disqualified to act as a Director/s under Section 111 of the BVI Business Companies Act, 2004. ${pronoun} hereby request the registered agent of the company to file my particulars with the Registrar of Corporate Affairs pursuant to section 118A and 118B of the BVI Business Companies Act, 2004.`;

            yPosition = addText(consentText, margin, yPosition, pageWidth - 2 * margin);
            yPosition += 10;

            // Closing
            yPosition = addText('Sincerely Yours', margin, yPosition, pageWidth - 2 * margin);
            yPosition += 10;

            // Signatures - one for each director
            directorData.forEach((director, index) => {
                if (director.signature) {
                    // Check if we need a new page
                    if (yPosition + 40 > pageHeight - margin) {
                        doc.addPage();
                        yPosition = margin;
                    }
                    
                    // Add signature image
                    doc.addImage(director.signature, 'PNG', margin, yPosition, 60, 20);
                    yPosition += 22;
                    
                    // Add signature label and name
                    yPosition = addText('____________________', margin, yPosition, pageWidth - 2 * margin);
                    yPosition += 3;
                    yPosition = addText(`Signature: ${director.name}`, margin, yPosition, pageWidth - 2 * margin);
                    yPosition += 3;
                    yPosition = addText('(Digitally Signed)', margin, yPosition, pageWidth - 2 * margin);
                    yPosition += 15; // Space between signatures
                }
            });

            // Save PDF
            const fileName = `Consent_to_Act_Director_${directorNames.replace(/\s+/g, '_').replace(/,/g, '_')}_${new Date().toISOString().split('T')[0]}.pdf`;
            doc.save(fileName);
        }

        // Initialize single director country dropdown on page load
        document.addEventListener('DOMContentLoaded', function() {
            const singleDirectorCountry = document.getElementById('directorCountry');
            if (singleDirectorCountry) {
                populateCountryDropdown(singleDirectorCountry);
            }
        });
    </script>
</body>
</html>
